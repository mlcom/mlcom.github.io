---
layout: default
---
<div class="container">
    <h1 class="font-weight-bold spanborder" itemprop="headline">
        <span>{{page.title}}</span>
    </h1>
    
    <div class="row">
        <div class="col-md-8">
            {% if page.image %}
            <img class="card-img-top mb-4 shadow-lg rounded" 
                 src="{% if page.image contains '://' %}{{ page.image }}{% else %}{{ page.image | absolute_url }}{% endif %}" 
                 alt="{{ page.title }}" 
                 loading="lazy"
                 width="800"
                 height="450">
            {% endif %}
            
            <div class="page-content" itemprop="text">
                {{ content }}
                
                <!-- Comments Section -->
                {% if page.comments == true %}
                    {% include comments.html %}
                {% endif %}
            </div>
        </div>
        
        <div class="col-md-4">
            {% include sidebar.html %}
            
            <!-- Table of Contents -->
            {% if page.toc %}
            <div class="sticky-top pt-3">
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">Table of Contents</h5>
                        <div id="toc"></div>
                    </div>
                </div>
            </div>
            
            <script>
            document.addEventListener('DOMContentLoaded', function() {
                const headings = document.querySelectorAll('.page-content h2, .page-content h3');
                const toc = document.getElementById('toc');
                let currentList = toc;
                
                if (headings.length > 0) {
                    headings.forEach((heading, index) => {
                        // Add ID if not exists
                        if (!heading.id) {
                            heading.id = 'heading-' + index;
                        }
                        
                        const listItem = document.createElement('li');
                        const link = document.createElement('a');
                        link.href = '#' + heading.id;
                        link.textContent = heading.textContent;
                        link.className = 'toc-link';
                        
                        if (heading.tagName === 'H2') {
                            currentList = document.createElement('ul');
                            currentList.className = 'toc-sublist';
                            listItem.appendChild(link);
                            listItem.appendChild(currentList);
                            toc.appendChild(listItem);
                        } else if (heading.tagName === 'H3') {
                            const subItem = document.createElement('li');
                            subItem.appendChild(link);
                            currentList.appendChild(subItem);
                        }
                    });
                } else {
                    toc.innerHTML = '<p class="text-muted small">No headings found in this article.</p>';
                }
            });
            </script>
            {% endif %}
        </div>
    </div>
</div>
