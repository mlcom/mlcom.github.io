<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7391081469827045"
            crossorigin="anonymous">
    <title>{{page.title}} | {{site.name}}</title>

    {% seo %}

    <link rel="shortcut icon" type="image/x-icon" href="{{site.baseurl}}/{{site.favicon}}">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <!-- Google Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700" rel="stylesheet">

    <!-- Bootstrap Modified -->
    <link rel="stylesheet" href="{{site.baseurl}}/assets/css/main.css">

    <!-- Theme Stylesheet -->
    <link rel="stylesheet" href="{{site.baseurl}}/assets/css/theme.css">

    <!-- Jquery on header to make sure everything works, the rest  of the scripts in footer for fast loading -->
    <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>

    {% include tracking-header.html %}


</head>

<body class="{% if page.url == "/" %} homefirstpage {% endif %}">

    <!-- Navbar -->
    <nav id="MagicMenu" class="topnav navbar navbar-expand-lg navbar-light bg-white fixed-top">
    <div class="container">
        <a class="navbar-brand" href="{{ site.baseurl }}/index.html"><strong>{{site.name}}</strong></a>
        <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse" id="navbarColor02" style="">
            <ul class="navbar-nav mr-auto d-flex align-items-center">
               {% include menu-header.html %}
            </ul>
            <ul class="navbar-nav ml-auto d-flex align-items-center">
                {% include search-lunr.html %}
            </ul>
        </div>
    </div>
    </nav>

    <!-- Search Results -->
    <div id="lunrsearchresults">
        <ul class="mb-0"></ul>
    </div>

   <main role="main" class="site-content">

        <!-- ===== FINAL CURRENCY CALCULATOR (USER-DIRECTED METHOD) ===== -->
        <div class="container pt-4 pb-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Currency Converter</h5>
                    <div id="currency-calculator">
                        <div class="form-row">
                            <!-- Amount Input -->
                            <div class="form-group col-md-12">
                                <label for="amount">Amount</label>
                                <input type="number" id="amount" class="form-control" value="100" placeholder="Enter amount">
                            </div>
                            <!-- From Currency -->
                            <div class="form-group col-md-6">
                                <label for="from_currency">From</label>
                                <select id="from_currency" class="form-control">
                                    <option value="USD">ðŸ‡ºðŸ‡¸ USD - US Dollar</option>
                                    <option value="PKR" selected>ðŸ‡µðŸ‡° PKR - Pakistani Rupee</option>
                                    <option value="EUR">ðŸ‡ªðŸ‡º EUR - Euro</option>
                                    <option value="GBP">ðŸ‡¬ðŸ‡§ GBP - British Pound</option>
                                    <option value="AED">ðŸ‡¦ðŸ‡ª AED - UAE Dirham</option>
                                    <option value="INR">ðŸ‡®ðŸ‡³ INR - Indian Rupee</option>
                                    <option value="JPY">ðŸ‡¯ðŸ‡µ JPY - Japanese Yen</option>
                                    <option value="CAD">ðŸ‡¨ðŸ‡¦ CAD - Canadian Dollar</option>
                                </select>
                            </div>
                            <!-- To Currency -->
                            <div class="form-group col-md-6">
                                <label for="to_currency">To</label>
                                <select id="to_currency" class="form-control">
                                    <option value="USD" selected>ðŸ‡ºðŸ‡¸ USD - US Dollar</option>
                                    <option value="PKR">ðŸ‡µðŸ‡° PKR - Pakistani Rupee</option>
                                    <option value="EUR">ðŸ‡ªðŸ‡º EUR - Euro</option>
                                    <option value="GBP">ðŸ‡¬ðŸ‡§ GBP - British Pound</option>
                                    <option value="AED">ðŸ‡¦ðŸ‡ª AED - UAE Dirham</option>
                                    <option value="INR">ðŸ‡®ðŸ‡³ INR - Indian Rupee</option>
                                    <option value="JPY">ðŸ‡¯ðŸ‡µ JPY - Japanese Yen</option>
                                    <option value="CAD">ðŸ‡¨ðŸ‡¦ CAD - Canadian Dollar</option>
                                </select>
                            </div>
                        </div>
                        <!-- Convert Button -->
                        <div class="form-group text-center mt-3">
                            <button id="convert-button" class="btn btn-primary">Convert</button>
                        </div>
                        <!-- Result and Status Messages -->
                        <div id="result_container" class="mt-3 text-center">
                            <h6 id="result_text" class="text-success font-weight-bold"></h6>
                            <p id="status_text" class="text-muted"></p>
                        </div>
                    </div>
                     <small class="text-muted">Rates sourced from frankfurter.dev, updated daily via the European Central Bank.</small>
                </div>
            </div>
        </div>

        <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            const amountInput = document.getElementById('amount');
            const fromSelect = document.getElementById('from_currency');
            const toSelect = document.getElementById('to_currency');
            const convertButton = document.getElementById('convert-button');
            const resultText = document.getElementById('result_text');
            const statusText = document.getElementById('status_text');
            
            /**
             * This function performs the conversion using the exact logic you provided.
             * It makes a specific API call for the requested currency pair.
             */
            function convert(from, to, amount) {
                // Show a loading message
                statusText.textContent = 'Fetching rate...';
                resultText.textContent = ''; // Clear previous result

                // Corrected endpoint as per your example. NOTE: The '/v1' path is not in the latest docs, but we will use your provided URL.
                fetch(`https://api.frankfurter.dev/latest?from=${from}&to=${to}`)
                    .then(resp => {
                        if (!resp.ok) {
                            throw new Error('Network response was not ok');
                        }
                        return resp.json();
                    })
                    .then(data => {
                        // Check if the target rate exists
                        if (data.rates && data.rates[to]) {
                            const convertedAmount = (amount * data.rates[to]);
                            
                            // Display the result on the page instead of an alert
                            resultText.innerHTML = `${amount.toLocaleString()} ${from} = <span class="text-primary">${convertedAmount.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span> ${to}`;
                            statusText.textContent = ''; // Clear loading message
                        } else {
                            throw new Error(`Conversion rate for ${to} was not found.`);
                        }
                    })
                    .catch(error => {
                        console.error('Conversion Error:', error);
                        statusText.innerHTML = `<span class="text-danger">Could not complete conversion. Please try again.</span>`;
                    });
            }

            // Add an event listener to the button
            convertButton.addEventListener('click', function() {
                const amount = parseFloat(amountInput.value);
                const fromCurrency = fromSelect.value;
                const toCurrency = toSelect.value;

                // Basic validation
                if (isNaN(amount) || amount <= 0) {
                    statusText.innerHTML = '<span class="text-danger">Please enter a valid amount.</span>';
                    resultText.textContent = '';
                    return;
                }
                
                // Call the conversion function when the button is clicked
                convert(fromCurrency, toCurrency, amount);
            });

        });
        </script>
        <!-- ===== END FINAL CURRENCY CALCULATOR ===== -->


        {{ content }}
    </main>


    <!-- Scripts: popper, bootstrap, theme, lunr -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <script src="{{site.baseurl}}/assets/js/theme.js"></script>


    <!-- Footer -->
    <footer class="bg-white border-top p-3 text-muted small">
        <div class="container">
        <div class="row align-items-center justify-content-between">
            <div>
                <span class="navbar-brand mr-2 mb-0"><strong>ML Community</strong></span>
                <span>Copyright Â© <script>document.write(new Date().getFullYear())</script>.</span>
            </div>
        </div>
        </div>
    </footer>

    {% include tracking-footer.html %}

</body>

</html>
