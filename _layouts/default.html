<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7391081469827045"
            crossorigin="anonymous">
    <title>{{page.title}} | {{site.name}}</title>

    {% seo %}

    <link rel="shortcut icon" type="image/x-icon" href="{{site.baseurl}}/{{site.favicon}}">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <!-- Google Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700" rel="stylesheet">

    <!-- Bootstrap Modified -->
    <link rel="stylesheet" href="{{site.baseurl}}/assets/css/main.css">

    <!-- Theme Stylesheet -->
    <link rel="stylesheet" href="{{site.baseurl}}/assets/css/theme.css">

    <!-- Jquery on header to make sure everything works, the rest  of the scripts in footer for fast loading -->
    <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>

    {% include tracking-header.html %}


</head>

<body class="{% if page.url == "/" %} homefirstpage {% endif %}">

    <!-- Navbar -->
    <nav id="MagicMenu" class="topnav navbar navbar-expand-lg navbar-light bg-white fixed-top">
    <div class="container">
        <a class="navbar-brand" href="{{ site.baseurl }}/index.html"><strong>{{site.name}}</strong></a>
        <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse" id="navbarColor02" style="">
            <ul class="navbar-nav mr-auto d-flex align-items-center">
               {% include menu-header.html %}
            </ul>
            <ul class="navbar-nav ml-auto d-flex align-items-center">
                {% include search-lunr.html %}
            </ul>
        </div>
    </div>
    </nav>

    <!-- Search Results -->
    <div id="lunrsearchresults">
        <ul class="mb-0"></ul>
    </div>

    <main role="main" class="site-content">

        <!-- ===== FINAL SEO-OPTIMIZED CURRENCY CALCULATOR ===== -->
        <div class="container pt-4 pb-4">
            <!-- NEW: Dynamic SEO Heading -->
            <h2 id="seo-heading" class="text-center mb-4" style="font-size: 1.5rem;"></h2>

            <div class="card">
                <div class="card-body">
                    <h5 class="card-title text-center">Global Currency Converter</h5>
                    <fieldset id="calculator-fieldset" disabled>
                        <div id="currency-calculator">
                            <div class="form-row">
                                <div class="form-group col-md-12">
                                    <label for="amount">Amount</label>
                                    <input type="number" id="amount" class="form-control" value="100" placeholder="Enter amount">
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="from_currency">From</label>
                                    <select id="from_currency" class="form-control">
                                        <option>Loading Currencies...</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="to_currency">To</label>
                                    <select id="to_currency" class="form-control">
                                        <option>Loading Currencies...</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group text-center mt-3">
                                <button id="convert-button" class="btn btn-primary w-100">Convert</button>
                            </div>
                            <div id="result_container" class="mt-3 text-center">
                                <h6 id="result_text" class="text-success font-weight-bold" style="font-size: 1.25rem;"></h6>
                                <p id="status_text" class="text-muted"></p>
                            </div>
                        </div>
                    </fieldset>
                     <small class="text-muted d-block text-center mt-2">Rates provided by ExchangeRate-API.com.</small>
                </div>
            </div>
        </div>

        <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            // --- Data is injected by Jekyll at build time ---
            const lastUpdated = "{{ site.data.rates.last_updated_utc | date_to_xmlschema }}";
            const conversionRates = {{ site.data.rates.rates | jsonify }};
            const currencyNames = {{ site.data.currency_names | jsonify }}; // NEW: Get currency names
            
            const amountInput = document.getElementById('amount');
            const fromSelect = document.getElementById('from_currency');
            const toSelect = document.getElementById('to_currency');
            const convertButton = document.getElementById('convert-button');
            const resultText = document.getElementById('result_text');
            const statusText = document.getElementById('status_text');
            const fieldset = document.getElementById('calculator-fieldset');
            const seoHeading = document.getElementById('seo-heading'); // NEW: Get SEO heading element

            /**
             * Populates dropdowns with full currency names.
             */
            function populateCurrencies() {
                fromSelect.innerHTML = '';
                toSelect.innerHTML = '';
                for (const currencyCode in conversionRates) {
                    // NEW: Look up the full name, default to the code if not found
                    const fullName = currencyNames[currencyCode] || currencyCode;
                    const optionText = `${currencyCode} - ${fullName}`;
                    
                    fromSelect.add(new Option(optionText, currencyCode));
                    toSelect.add(new Option(optionText, currencyCode));
                }
                
                // Set default values
                fromSelect.value = 'USD';
                toSelect.value = 'PKR';
                
                fieldset.disabled = false;
                statusText.textContent = `Rates last updated: ${new Date(lastUpdated).toLocaleString()}`;
                updateSeoHeading(); // NEW: Set initial SEO heading
            }

            /**
             * NEW: Updates the H2 heading for SEO purposes.
             */
            function updateSeoHeading() {
                const fromCode = fromSelect.value;
                const toCode = toSelect.value;
                const fromName = currencyNames[fromCode] || fromCode;
                const toName = currencyNames[toCode] || toCode;
                
                const today = new Date();
                const formattedDate = today.toLocaleDateString('en-US', { day: 'numeric', month: 'long', year: 'numeric' });

                seoHeading.textContent = `${fromName} to ${toName} Rate Today - ${formattedDate}`;
            }

            /**
             * Performs the conversion using the stored rates.
             */
            function performConversion() {
                const amount = parseFloat(amountInput.value);
                const fromCurrency = fromSelect.value;
                const toCurrency = toSelect.value;

                if (isNaN(amount) || amount <= 0) {
                    resultText.textContent = '';
                    statusText.innerHTML = '<span class="text-danger">Please enter a valid amount.</span>';
                    return;
                }
                
                const rateFrom = conversionRates[fromCurrency];
                const rateTo = conversionRates[toCurrency];
                const convertedAmount = (amount / rateFrom) * rateTo;
                
                resultText.innerHTML = `${amount.toLocaleString()} ${fromCurrency} = <strong class="text-primary">${convertedAmount.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 4})}</strong> ${toCurrency}`;
                statusText.textContent = ''; // Clear any error messages
                updateSeoHeading(); // NEW: Update SEO heading on every conversion
            }

            // --- Event Listeners ---
            convertButton.addEventListener('click', performConversion);
            
            // NEW: Also update the SEO heading when dropdowns are changed
            fromSelect.addEventListener('change', updateSeoHeading);
            toSelect.addEventListener('change', updateSeoHeading);
            
            // --- Initial Action ---
            populateCurrencies();
        });
        </script>
        <!-- ===== END OF CALCULATOR ===== -->


        {{ content }}
    </main>


    <!-- Scripts: popper, bootstrap, theme, lunr -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <script src="{{site.baseurl}}/assets/js/theme.js"></script>


    <!-- Footer -->
    <footer class="bg-white border-top p-3 text-muted small">
        <div class="container">
        <div class="row align-items-center justify-content-between">
            <div>
                <span class="navbar-brand mr-2 mb-0"><strong>ML Community</strong></span>
                <span>Copyright © <script>document.write(new Date().getFullYear())</script>.</span>
            </div>
        </div>
        </div>
    </footer>

    {% include tracking-footer.html %}

</body>

</html>
