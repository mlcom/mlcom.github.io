<div class="sticky-top sticky-top-offset">
   <div class="card shadow-sm mb-4 mt-4">
        <div class="card-body p-3">
            <h5 class="card-title h6 text-center mb-2">Currency Converter</h5>
            <fieldset id="calculator-fieldset" disabled>
                <div id="currency-calculator">
                    <div class="form-group mb-2">
                        <input type="number" id="amount" class="form-control form-control-sm" value="100" placeholder="Amount">
                    </div>
                    <div class="form-group mb-2">
                        <select id="from_currency" class="form-control form-control-sm"></select>
                    </div>
                    <div class="form-group mb-2">
                        <select id="to_currency" class="form-control form-control-sm"></select>
                    </div>
                    <button id="convert-button" class="btn btn-primary btn-sm w-100">Convert</button>
                    <div id="result_container" class="mt-2 text-center">
                        <div id="result_text" class="text-success font-weight-bold small"></div>
                        <p id="status_text" class="text-muted small mb-0"></p>
                    </div>
                </div>
            </fieldset>
            <small class="text-muted d-block text-center mt-2">Rates updated daily</small>
        </div>
    </div>
    
    <h4 class="font-weight-bold spanborder"><span>Featured</span></h4>  
    <ol class="list-featured">				
        {% for post in site.tags.featured %}                
            <li class="mb-4">
            <span>
                <h6 class="font-weight-bold">
                    <a href="{{site.baseurl}}{{ post.url }}" class="text-dark">{{ post.title }}</a>
                </h6>
                <span class="d-block text-muted">
                    In <span class="catlist">
                    {% for category in post.categories %}
                    <a class="text-capitalize text-muted smoothscroll" href="{{site.baseurl}}/categories.html#{{ category | downcase }}">{{ category }}</a><span class="sep">, </span>
                    {% endfor %}
                    </span>
                </span>
            </span>
            </li>                
        {% endfor %}   
    </ol>
    
</div>

<!-- Currency Converter Script -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    const fromCurrency = document.getElementById("from_currency");
    const toCurrency = document.getElementById("to_currency");
    const amountInput = document.getElementById("amount");
    const convertButton = document.getElementById("convert-button");
    const resultText = document.getElementById("result_text");
    const statusText = document.getElementById("status_text");
    const fieldset = document.getElementById("calculator-fieldset");

    const API_URL = "https://api.exchangerate.host/latest";

    async function fetchCurrencies() {
        try {
            statusText.textContent = "Loading currencies...";
            const response = await fetch(API_URL);
            const data = await response.json();
            const currencies = Object.keys(data.rates);

            currencies.forEach(code => {
                let option1 = new Option(code, code);
                let option2 = new Option(code, code);
                fromCurrency.add(option1);
                toCurrency.add(option2);
            });

            fromCurrency.value = "USD";
            toCurrency.value = "EUR";
            statusText.textContent = "Currencies loaded.";
            fieldset.disabled = false;
        } catch (error) {
            statusText.textContent = "Failed to load currencies.";
        }
    }

    async function convertCurrency() {
        const amount = parseFloat(amountInput.value);
        if (isNaN(amount) || amount <= 0) {
            resultText.textContent = "Enter a valid amount.";
            return;
        }

        const from = fromCurrency.value;
        const to = toCurrency.value;

        try {
            statusText.textContent = "Converting...";
            const response = await fetch(`${API_URL}?base=${from}&symbols=${to}`);
            const data = await response.json();
            const rate = data.rates[to];
            const result = (amount * rate).toFixed(2);

            resultText.textContent = `${amount} ${from} = ${result} ${to}`;
            statusText.textContent = "Conversion successful.";
        } catch (error) {
            statusText.textContent = "Conversion failed.";
        }
    }

    convertButton.addEventListener("click", convertCurrency);

    fetchCurrencies();
});
</script>
